{% load static %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_messages %}
{% bootstrap_javascript %}
{% load socialaccount %}

<div class="p-5 bg-primary text-warning text-center">
  <h1>Review Transfer Credit Requests</h1>

    {% if not user.is_authenticated %}
        <p>Welcome, please log in to continue!</p>
    {% elif user.usertype.role == 'Admin' %}
        <p>Welcome {{ user.username }}, select a transfer request to approve or deny.</p>
    {% else %}
         <p>{{ user.username }}, Students do not have access to this page.</p>
    {% endif %}

</div>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="container-fluid">
            {% if not user.is_authenticated %}
                <ul class="navbar-nav">
                    <li class="nav-item me-4" >
                        <a class="nav-link active" href="{% provider_login_url 'google' %}">Login With Google</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link disabled" href="/logout"> Log Out</a>
                    </li>
                </ul>
            {% elif user.usertype.role == 'Admin' %}
                <ul class="navbar-nav">
                    <li class="nav-item me-4" >
                        <a class="nav-link disable" href="{% provider_login_url 'google' %}">Login With Google</a>
                    </li>

                    <li class="nav-item me-4">
                         <a class="nav-link active" href="/sisRequest">Find a Course at UVA</a>
                    </li>

                    <li class="nav-item me-4" >
                        <a class="nav-link active" href="/adminApproval">Review Transfer Credit Requests</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                     <a class="nav-link active" href="/logout"> Log Out</a>
                    </li>
                </ul>

            {% else %}
                <ul class="navbar-nav">
                    <li class="nav-item me-4" >
                    <a class="nav-link disabled" href="{% provider_login_url 'google' %}">Login With Google</a>
                    </li>

                     <li class="nav-item me-4">
                         <a class="nav-link active" href="/sisRequest">Find a Course at UVA</a>
                     </li>

                    <li class="nav-item me-4">
                     <a class="nav-link active" href="/requestCourse">Request a Course for Credit</a>
                    </li>

                    <li class="nav-item me-4">
                    <a class="nav-link active" href="/requestCourseList">Status of Credit Requests</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                     <a class="nav-link active" href="/logout"> Log Out</a>
                    </li>
                </ul>
            {% endif %}
        </div>
</nav>

<style>
.center {
  margin: auto;
  width: 60%;
  padding: 10px;
}
</style>
<html>
<div class="container mt-5">
    <div class = "card card-body" >
        <form method = "get">
          {{coursesFilter.form}}
          <button type = "submit">Search</button>
        </form>
    </div>
</div>
<div class="container mt-5">
        {% if courses %}
        <table class = "table center table-striped table-bordered">
         <thead class = "thead-dark">
            <tr>
              <th>Course ID</th>
              <th>Institution</th>
              <th>Course Number</th>
              <th>Course Title</th>
              <th>Submitted By</th>
              <th>Status</th>
            </tr>
         </thead>
        {%for course in courses%}
          <tr>
            <td><a href = "courses/{{course.pk}}">{{course.pk}}</a></td>
            <td>{{course.course_institution}}</td>
            <td>{{course.course_dept_num}}</td>
            <td>{{course.course_name}}</td>
            <td>{{course.username}}</td>
            <td>{{course.status}}</td>
          </tr>
        {%endfor%}
        </table>
        {% else %}
            <p>There are no course requests.</p>
        {% endif %}
</div>
</html>
